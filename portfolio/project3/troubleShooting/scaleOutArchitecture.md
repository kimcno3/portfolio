# Scale Out을 고려한 아키텍쳐 설계
## 문제점
해당 프로젝트에서 가장 중점으로 생각한 부분은 아키텍처 설계 단계에서부터 Scale Out이 가능한 설계로 구현해보기 위해 고민해 보는 것이였습니다. 

그 과정 속에서 MSA에 대한 개념을 참고해 API 서버와 채팅 서버를 서비스 단위로 분리하고 각 서비스를 수행하는 서버의 개수를 필요에 따라 늘릴 수 있도록 구성했습니다. 

그리고 Redis에선 각 채팅 서버에 대한 정보를 저장하면서 현재 각 서버의 상태 정보와 웹소켓에 접속해 있는 클라이언트 정보까지 관리하도록 구현했습니다. 또한 Redis도 단일 서버가 아닌 SPOF를 피하는 구조로 구현하기 위해 Redis Cluster를 활용해 다중 서버에서 데이터가 저장되고 조회할 수 있도록 구현했습니다. 

마지막으로 서비스별로 구분되어 독립적으로 동작하는 서버들 사이에서도 데이터 통신이 이뤄질 수 있도록  RestTemplate을 활용해 직접 uri를 알고 있지 않아도 Controller 객체들이 연결되어 API에서 API로 데이터를 넘겨주면서 로직을 수행할 수 있도록 구성했습니다.

이처럼 설계 단계에서부터 확장에 대한 고려를 해보면서 신중하게 어떠한 구조로 프로젝트를 진행할지 고민했고, 어플리케이션 아키텍처 구조에 대한 개념과 설계에 대한 중요성을 깊게 이해할 수 있는 경험이 되었습니다.

## 해결방안

### MSA

### 아키텍처 설계 도안
<p align="center"><img width="864" alt="스크린샷 2022-09-11 오전 3 22 01" src="https://user-images.githubusercontent.com/77563468/189536597-5e047d5e-bd85-4011-8044-e70284c2e22b.png"></p>

## 마치며

## 참고자료
